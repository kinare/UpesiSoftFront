(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db623d1"],{2375:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sk-spinner sk-spinner-double-bounce"},[n("div",{staticClass:"sk-double-bounce1"}),n("div",{staticClass:"sk-double-bounce2"})])}],i={name:"Spinner"},o=i,c=n("2877"),r=Object(c["a"])(o,s,a,!1,null,"5cbedca4",null);e["a"]=r.exports},"2cfb":function(t,e,n){},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"6b54":function(t,e,n){"use strict";n("3846");var s=n("cb7c"),a=n("0bfb"),i=n("9e1e"),o="toString",c=/./[o],r=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?r(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?a.call(t):void 0)}):c.name!=o&&r(function(){return c.call(this)})},"712c":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid p-sm"},[n("div",{staticClass:"col-lg-10 col-lg-push-1 col-xs-12"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-3"},[n("a",{staticClass:"btn btn-white btn-lg pull-left",on:{click:function(e){return t.$router.push("/pos")}}},[n("i",{staticClass:"fa fa-arrow-left"}),t._v(" Back ")])]),t._m(0),n("div",{staticClass:"col-xs-3"},[n("a",{staticClass:"btn btn-primary btn-lg pull-right",class:t.tendered>=t.getTotalSales?"":"disabled",on:{click:t.receipt}},[t._v("Validate "),n("i",{staticClass:"fa fa-arrow-right"})])])]),n("div",{staticClass:"hr-line-dashed"}),n("div",{staticClass:"ibox-content",class:t.loading?"sk-loading":"",staticStyle:{border:"none",padding:"0"}},[t.loading?n("spinner"):t._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:" col-xs-8 col-sm-push-4"},[n("button",{staticClass:"btn btn-lg  btn-block pull-right",class:"CASH"===t.method?"btn-primary":"btn-white",on:{click:function(e){t.method="Cash"}}},[t._v("Cash")]),n("button",{staticClass:"btn btn-lg  btn-block pull-right",class:"MPESA"===t.method?"btn-primary":"btn-white",on:{click:function(e){t.method="Mpesa"}}},[t._v("Mpesa")]),n("button",{staticClass:"btn btn-lg  btn-block pull-right",class:"VISA"===t.method?"btn-primary":"btn-white",on:{click:function(e){t.method="Card"}}},[t._v("Card")])])])]),n("div",{staticClass:"col-xs-8 border-left"},[n("div",{staticClass:"row well",staticStyle:{margin:"0 10px","font-family":"monospace, sans-serif"}},[n("div",{staticClass:"col-xs-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"due"}},[t._v("Due")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.getTotalSales,expression:"getTotalSales"}],staticClass:"form-control",attrs:{type:"number",id:"due",disabled:""},domProps:{value:t.getTotalSales},on:{input:function(e){e.target.composing||(t.getTotalSales=e.target.value)}}})])]),n("div",{staticClass:"col-xs-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"tendered"}},[t._v("Tendered")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tendered,expression:"tendered"}],staticClass:"form-control",attrs:{type:"number",id:"tendered",autofocus:""},domProps:{value:t.tendered},on:{input:function(e){e.target.composing||(t.tendered=e.target.value)}}})])]),n("div",{staticClass:"col-xs-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"change"}},[t._v("Change")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.change,expression:"change"}],staticClass:"form-control",attrs:{type:"number",id:"change",disabled:""},domProps:{value:t.change},on:{input:function(e){e.target.composing||(t.change=e.target.value)}}})])]),n("div",{staticClass:"col-xs-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"change"}},[t._v("Method")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.method,expression:"method"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.method=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"CASH"}},[t._v("Cash")]),n("option",{attrs:{value:"MPESA"}},[t._v("Mpesa")]),n("option",{attrs:{value:"VISA"}},[t._v("Card")])])])]),n("div",{staticClass:"col-xs-12 text-right",staticStyle:{"margin-top":"20px"}},[n("table",{staticClass:"table invoice-total"},[n("tbody",[n("tr",[t._m(1),n("td",[t._v("Ksh "+t._s(t.tendered))])]),n("tr",[t._m(2),n("td",[t._v("Ksh "+t._s(t.getTotalSales))])]),n("tr",[t._m(3),n("td",[t._v("Ksh "+t._s(t.change))])])])])])]),n("div",{staticClass:"hr-line-dashed"}),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-7"},[n("div",{staticClass:"ibox-content pos-calc",staticStyle:{border:"none"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12"},[n("div",{staticClass:"row no-pad"},[n("div",{staticClass:"col-xs-3"},[n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(1)}}},[t._v("1")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(4)}}},[t._v("4")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(7)}}},[t._v("7")]),n("button",{staticClass:"btn btn-lg btn-warning btn-block",on:{click:t.unsetTendered}},[t._v("C")])]),n("div",{staticClass:"col-xs-3"},[n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(2)}}},[t._v("2")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(5)}}},[t._v("5")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(8)}}},[t._v("8")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(0)}}},[t._v("0")])]),n("div",{staticClass:"col-xs-3"},[n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(3)}}},[t._v("3")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(6)}}},[t._v("6")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(9)}}},[t._v("9")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.setTendered(".")}}},[t._v(".")])]),n("div",{staticClass:"col-xs-3"},[n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.addTendered(10)}}},[t._v("+10")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.addTendered(20)}}},[t._v("+20")]),n("button",{staticClass:"btn btn-lg btn-white btn-block",on:{click:function(e){return t.addTendered(50)}}},[t._v("+50")]),n("button",{staticClass:"btn btn-lg btn-danger btn-block",on:{click:function(e){return t.delTendered(1)}}},[n("i",{staticClass:"fa fa-backspace"})])])])])])])]),n("div",{staticClass:"col-xs-5"},[n("div",{staticClass:"ibox-content",staticStyle:{border:"none"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12"},[n("router-link",{staticClass:"btn btn-block btn-lg btn-white",attrs:{to:"/pos/customers"}},[n("i",{staticClass:"fa fa-user-alt"}),t._v(" "+t._s(t.validator.isEmptyObject(t.customer)?"Select Customer":t.customer.isBusiness?t.customer.customerBusinessName:t.customer.customerFirstName))])],1)])])])])])])],1)])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-xs-6"},[n("h2",{staticClass:"text-center",staticStyle:{"margin-top":"10px"}},[t._v("Payment")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("strong",[t._v("Paid :")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("strong",[t._v("Amount Due :")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("strong",[t._v("Change :")])])}],i=(n("6b54"),n("2375")),o=n("ecdc"),c=new o["a"],r={name:"Payment",components:{Spinner:i["a"]},data:function(){return{validator:window.validator,namespace:"",tendered:0,method:"",change:0}},beforeRouteEnter:function(t,e,n){n(function(e){e.namespace=t.params.namespace,e.method=""===e.method?"CASH":e.method})},methods:{receipt:function(){""!==this.oderNo&&this.$router.push("/pos/receipt/".concat(this.namespace,"/").concat(this.oderNo)),this.$store.dispatch("pos/"+this.namespace+"/generateReceipt",c.prepareDocument("ORDER",this.customer,this.items,{total:this.getTotalSales,tendered:this.tendered,change:this.change,method:this.method}))},setTendered:function(t){this.tendered=parseInt(this.tendered.toString()+""+t)},delTendered:function(){1===this.tendered.toString().length?this.tendered=0:this.tendered=parseInt(this.tendered.toString().slice(0,-1))},unsetTendered:function(){this.tendered=0},addTendered:function(t){this.tendered=this.tendered+t}},computed:{items:function(){return this.$store.getters["pos/"+this.namespace+"/items"]},loading:function(){return this.$store.getters["pos/"+this.namespace+"/loading"]},getTotalSales:function(){return this.$store.getters["pos/"+this.namespace+"/totalSales"]},payment:function(){return this.$store.getters["pos/"+this.namespace+"/payment"]},customer:function(){return this.$store.getters["pos/"+this.namespace+"/customer"]},oderNo:function(){return this.$store.getters["pos/"+this.namespace+"/oderNo"]}},watch:{tendered:{handler:function(t,e){var n=t-this.getTotalSales;this.change=n<0?0:n}},oderNo:{handler:function(t,e){""!==t&&""===e&&this.$router.push("/pos/receipt/".concat(this.namespace,"/").concat(t))}}}},l=r,d=(n("cad4"),n("2877")),u=Object(d["a"])(l,s,a,!1,null,"37bd7a47",null);e["default"]=u.exports},cad4:function(t,e,n){"use strict";var s=n("2cfb"),a=n.n(s);a.a},ecdc:function(t,e,n){"use strict";var s=n("d225"),a=n("b0b4"),i=function(){function t(){Object(s["a"])(this,t)}return Object(a["a"])(t,[{key:"updateSale",value:function(t,e){switch(e){case"QTY":t.price=t.qty*t.itemPrice;break;case"UNIT":t.price=t.soldMeasurement*t.itemPrice,t.measurementAfter=t.measurementBefore-t.soldMeasurement;break;case"PRICE":break}return t}},{key:"performOperation",value:function(t){switch(t.operation){case"QTY":"CUSTOM"!==t.operand.sellAs&&(t.operand.qty=parseInt(t.operand.qty+""+t.input));break;case"UNIT":"FULL"!==t.operand.sellAs&&(t.operand.soldMeasurement=parseInt(t.operand.soldMeasurement+""+t.input));break;case"PRICE":t.operand.price=parseInt(t.operand.price+""+t.input);break}return this.updateSale(t.operand,t.operation)}},{key:"prepareDocument",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ORDER",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a={customerId:e.id,customerDetails:JSON.stringify(e),orderType:t,orderStatus:"ORDER"===t?"PAID":"PENDING",orderItems:JSON.stringify(n),total:s.total,paymentMethod:s.method,tendered:s.tendered,change:s.change};return a}}]),t}();e["a"]=i}}]);
//# sourceMappingURL=chunk-4db623d1.93f6945c.js.map